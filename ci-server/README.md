## Сервер

### Для запуска
Нужно прописать токен в  ```server-conf.json```

Запуск ```npm i``` и ```npm start``` 

Начнет слушать порт, который прописан в конфиге.

И чтобы он что-то начал обрабатывать, нужно добавить билдов в хранилище, и запустить хотя бы один агент. Сервер будет ожидать как минимум всех вышеописанных условий.

### Агент

Для запуска агента настроить ```agent-conf.json``` (если необходимо)

Далее ``` cd  agent-server ``` ```npm i ``` и ``` npm start``` приложение начнет слушать порт который прописан в конфиге.

Для запуска еще одного агента, можно изменить порт в конфиге, и сделать ``` npm start```

Или запустить сервер в таком виде, передав аргументом порт ``` node server.js port ```
 

#### ТЗ
*1.Сервер должен максимально утилизировать имеющихся агентов*:
В цикле обходит всех агентов, и как только какой-то из них будет готов, посылает задачу.

*2. Сервер должен корректно обрабатывать ситуацию, когда агент прекратил работать между сборками*:
Сервер пингует агентов, если кто-то отваливается он удаляет их из списка агентов.

*3. Сервер должен корректно обрабатывать ситуацию, когда агент прекратил работать в процессе выполнения сборки*: Точно так же пингует агентов, но в этом случае дополнительно отменит тот билд который выполнялся на агенте, ручкой *cancel*.

*4. Агент должен корректно обрабатывать ситуацию, когда при старте не смог соединиться с сервером*: Делает n количество ретраев, и после выводит лог о том что не смог соедениться с сервером, и делает *process.exit()*.

*5 Агент должен корректно обрабатывать ситуацию, когда при отправке результатов сборки не смог соединиться с сервером.*: Агент тоже постоянно пингует сервер, и он напишем об этом сразу как только пинг не пройдет.
 
